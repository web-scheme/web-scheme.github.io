<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <script defer src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{\"token\": \"10e50002c4164673b356d1be97900968\"}"></script><title>WebScheme</title><meta name="description" content="R‚Å∑RS Scheme for WebAssembly">
    <link rel="modulepreload" href="/assets/app.ed3351a4.js"><link rel="modulepreload" href="/assets/index.html.3483c2ff.js"><link rel="modulepreload" href="/assets/index.html.948a10f4.js"><link rel="prefetch" href="/assets/component-model.html.3d790c16.js"><link rel="prefetch" href="/assets/core-modules.html.703f545e.js"><link rel="prefetch" href="/assets/intro.html.9eb3eff0.js"><link rel="prefetch" href="/assets/404.html.7d858b3d.js"><link rel="prefetch" href="/assets/component-model.html.188f5924.js"><link rel="prefetch" href="/assets/core-modules.html.35197954.js"><link rel="prefetch" href="/assets/intro.html.bc0c58df.js"><link rel="prefetch" href="/assets/404.html.eea1b709.js"><link rel="prefetch" href="/assets/404.73e04194.js"><link rel="prefetch" href="/assets/Layout.1756faaa.js">
    <link rel="stylesheet" href="/assets/style.44106917.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a aria-current="page" href="/" class="router-link-active router-link-exact-active"><img class="logo" src="/logo.svg" alt="WebScheme"><span class="site-name can-hide">WebScheme</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/web-scheme/wsc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://github.com/web-scheme/wsc" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><!--[--><!--]--></aside><!--]--><!--[--><main class="home"><header class="hero"><img src="/logo.svg" alt="WebScheme"><h1 id="main-title">WebScheme</h1><p class="description">R‚Å∑RS Scheme for WebAssembly</p><p class="actions"><!--[--><a href="/intro" class="action-button primary" aria-label="Get Started"><!--[--><!--]--> Get Started <!--[--><!--]--></a><a href="/core-modules" class="action-button secondary" aria-label="Design"><!--[--><!--]--> Design <!--[--><!--]--></a><!--]--></p></header><div class="features"><!--[--><div class="feature"><h2>Report-conformant</h2><p>Full (planned) support for R‚Å∑RS.</p></div><div class="feature"><h2>WebAssembly-native</h2><p>Prioritize WebAssembly as a compilation target and FFI.</p></div><div class="feature"><h2>WIP</h2><p>&quot;Infantile&quot; would be a generous characterization.</p></div><!--]--></div><div class="theme-default-content"><div><p>WebScheme compiles <a href="/r7rs-small.pdf">Scheme</a> code into <a href="https://webassembly.org" target="_self" rel="noopener noreferrer">WebAssembly</a> modules. This allows run-time or compile-time linkage to other WebAssembly modules, including those implemented in foreign languages via <a href="https://github.com/WebAssembly/component-model" target="_self" rel="noopener noreferrer">components</a>.</p><p>WebScheme programs containing library definitions are able to produce Wasm modules. For example, this Scheme library may result in this Wasm module, pending the adoption of the <a href="https://github.com/WebAssembly/gc" target="_self" rel="noopener noreferrer">GC</a> and <a href="https://github.com/WebAssembly/proposal-type-imports" target="_self" rel="noopener noreferrer">type imports</a> proposals:</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Wasm (as well as R‚Å∑RS) is evolving fast. Most of the advanced features on which WebScheme intends to depend (GC, interface types, type imports, etc.) are in various stages of proposal, but based on the proposals so far, Wasm should eventually enable a compact, performant implementation.</p></div><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true">Scheme</button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false">Wasm</button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-scheme ext-scheme line-numbers-mode"><pre class="language-scheme"><code><span class="token comment">;; Library names are resolved to compiled Wasm module files by</span>
<span class="token comment">;; converting the library name parts to their external representation</span>
<span class="token comment">;; and concetenating them as subdirectories of the root library directory.</span>
<span class="token comment">;; For example, `(com |Foo üòÄ| 12 |\x15|)`</span>
<span class="token comment">;; would resolve to `${ROOT}/com/Foo\ üòÄ/12/\x15.wasm`,</span>
<span class="token comment">;; containing either a Wasm core module also compiled by WebScheme,</span>
<span class="token comment">;; or an adapter module compiled by anything.</span>
<span class="token punctuation">(</span><span class="token keyword">define-library</span> <span class="token punctuation">(</span><span class="token function">library</span> name<span class="token punctuation">)</span>

  <span class="token comment">;; The compiler can either produce a standalone executable</span>
  <span class="token comment">;; or keep this import dynamic.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token function">scheme</span> base<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">;; Globals and functions can be directly imported.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token keyword">only</span> <span class="token punctuation">(</span><span class="token function">com</span> <span class="token identifier">|Foo üòÄ|</span> <span class="token number">12</span> <span class="token identifier">|\x15|</span><span class="token punctuation">)</span> external-function<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token keyword">begin</span>
    <span class="token comment">;; Macros are exported as simple global `syntax-rules` objects</span>
    <span class="token comment">;; and also listed in a special table.</span>
    <span class="token punctuation">(</span><span class="token keyword">define-syntax</span> macro
      <span class="token punctuation">(</span><span class="token keyword">syntax-rules</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">macro</span> x ...<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">list</span> x ...<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">;; Functions are exported as Wasm functions.</span>
    <span class="token punctuation">(</span><span class="token keyword">define</span> <span class="token punctuation">(</span><span class="token function">function</span> x y<span class="token punctuation">)</span>
      <span class="token punctuation">(</span><span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">external-function</span> x x<span class="token punctuation">)</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment">;; All other objects are exported as globals.</span>
    <span class="token punctuation">(</span><span class="token keyword">define</span> value <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>

    <span class="token comment">;; All expressions are evaluated in the module&#39;s start function.</span>
    <span class="token punctuation">(</span><span class="token function">display</span> <span class="token string">&quot;Instantiated!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token keyword">export</span> macro function value<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-scheme ext-scheme line-numbers-mode"><pre class="language-scheme"><code><span class="token comment">;; The compiled core module.</span>
<span class="token comment">;; Using extensions, it would also be possible to produce an adapter module.</span>
<span class="token punctuation">(</span><span class="token function">module</span>

  <span class="token comment">;; The special &quot;s-lang&quot; module is the runtime.</span>
  <span class="token comment">;; Types and functions are imported as needed and always statically linked.</span>
  <span class="token comment">;; Two S-lang programs compiled against different versions of the runtime</span>
  <span class="token comment">;; may have incompatible ABIs.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;s-lang&quot;</span> <span class="token string">&quot;t-obj&quot;</span> <span class="token punctuation">(</span><span class="token function">type</span> $t-obj<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token comment">;; Super-type for all objects.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;s-lang&quot;</span> <span class="token string">&quot;t-pair&quot;</span> <span class="token punctuation">(</span><span class="token function">type</span> $t-pair<span class="token punctuation">)</span><span class="token punctuation">)</span>                  <span class="token comment">;; Pair type.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;s-lang&quot;</span> <span class="token string">&quot;t-string&quot;</span> <span class="token punctuation">(</span><span class="token function">type</span> $t-string<span class="token punctuation">)</span><span class="token punctuation">)</span>              <span class="token comment">;; String type.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;s-lang&quot;</span> <span class="token string">&quot;t-syntax-rules&quot;</span> <span class="token punctuation">(</span><span class="token function">type</span> $t-syntax-rules<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">;; `syntax-rules` (macro) type.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;s-lang&quot;</span> <span class="token string">&quot;t-null&quot;</span> <span class="token punctuation">(</span><span class="token function">type</span> $t-null<span class="token punctuation">)</span><span class="token punctuation">)</span>                  <span class="token comment">;; Null type.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;s-lang&quot;</span> <span class="token string">&quot;null&quot;</span> <span class="token punctuation">(</span><span class="token function">global</span> $null<span class="token punctuation">)</span><span class="token punctuation">)</span>                    <span class="token comment">;; Null value.</span>

  <span class="token comment">;; The import compiler can statically analyze libraries</span>
  <span class="token comment">;; to only import what it needs for import sets without an `only` clause.</span>
  <span class="token comment">;; `display` only takes 1 parameter: the list of parameters.</span>
  <span class="token comment">;; This is true of all functions defined as `(&lt;name&gt; . &lt;parameters&gt;)`,</span>
  <span class="token comment">;; and allows a rare (if limited) opportunity for static typing.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;(scheme base)&quot;</span> <span class="token string">&quot;display&quot;</span> <span class="token punctuation">(</span><span class="token function">func</span> $display <span class="token punctuation">(</span><span class="token function">param</span> $t-pair<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">;; The module name is the canonical external representation</span>
  <span class="token comment">;; of the entire library name.</span>
  <span class="token comment">;; The function signature is determined by inspection of the dependency</span>
  <span class="token comment">;; at compile-time.</span>
  <span class="token punctuation">(</span><span class="token keyword">import</span> <span class="token string">&quot;(com |Foo üòÄ| 12 |\x15|)&quot;</span> <span class="token string">&quot;external-function&quot;</span> <span class="token punctuation">(</span><span class="token function">func</span> <span class="token punctuation">(</span><span class="token function">param</span> $t-obj<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">result</span> $t-obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token comment">;; `syntax-rules` (a.k.a macros) can be imported and exported,</span>
  <span class="token comment">;; and have a run-time representation.</span>
  <span class="token comment">;; Although dynamic imports will not affect already-running code</span>
  <span class="token comment">;; (and at that point could only really be used with `eval`),</span>
  <span class="token comment">;; static (as configurable by compiler flag) imports apply to subsequent code.</span>
  <span class="token punctuation">(</span><span class="token function">global</span> $macro <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">&quot;macro&quot;</span><span class="token punctuation">)</span> $t-syntax-rules ...<span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token function">func</span> $function <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">param</span> $x $t-obj<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token function">param</span> $y $t-obj<span class="token punctuation">)</span> ...<span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token function">global</span> $value <span class="token punctuation">(</span><span class="token keyword">export</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span> $t-string ...<span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token function">func</span> $_start ...<span class="token punctuation">)</span>

  <span class="token punctuation">(</span><span class="token function">start</span> $_start<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div></div></div><!--[--><div class="footer"><a href="https://matrix.to/#/#web-scheme:matrix.org" target="_blank"><svg version="1.1" viewBox="0 0 27.9 32" style="height:1em;position:relative;top:.125em" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><g transform="translate(-.095 .005)" fill="var(--c-text)"><path d="m27.1 31.2v-30.5h-2.19v-0.732h3.04v32h-3.04v-0.732z"/><path d="m8.23 10.4v1.54h0.044c0.385-0.564 0.893-1.03 1.49-1.37 0.58-0.323 1.25-0.485 1.99-0.485 0.72 0 1.38 0.14 1.97 0.42 0.595 0.279 1.05 0.771 1.36 1.48 0.338-0.5 0.796-0.941 1.38-1.32 0.58-0.383 1.27-0.574 2.06-0.574 0.602 0 1.16 0.074 1.67 0.22 0.514 0.148 0.954 0.383 1.32 0.707 0.366 0.323 0.653 0.746 0.859 1.27 0.205 0.522 0.308 1.15 0.308 1.89v7.63h-3.13v-6.46c0-0.383-0.015-0.743-0.044-1.08-0.0209-0.307-0.103-0.607-0.242-0.882-0.133-0.251-0.336-0.458-0.584-0.596-0.257-0.146-0.606-0.22-1.05-0.22-0.44 0-0.796 0.085-1.07 0.253-0.272 0.17-0.485 0.39-0.639 0.662-0.159 0.287-0.264 0.602-0.308 0.927-0.052 0.347-0.078 0.697-0.078 1.05v6.35h-3.13v-6.4c0-0.338-7e-3 -0.673-0.021-1-0.0114-0.314-0.0749-0.623-0.188-0.916-0.108-0.277-0.3-0.512-0.55-0.673-0.258-0.168-0.636-0.253-1.14-0.253-0.198 0.0083-0.394 0.042-0.584 0.1-0.258 0.0745-0.498 0.202-0.705 0.374-0.228 0.184-0.422 0.449-0.584 0.794-0.161 0.346-0.242 0.798-0.242 1.36v6.62h-3.13v-11.4z"/><path d="m0.936 0.732v30.5h2.19v0.732h-3.04v-32h3.03v0.732z"/></g></svg> Chat <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> about this.</div><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.ed3351a4.js" defer></script>
  </body>
</html>
